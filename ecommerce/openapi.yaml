openapi: 3.0.3
info:
  title: ì˜¤ëŠ˜ í•œ ì°¨ (OneulHanCha) API
  description: |
    # ì˜¤ëŠ˜ í•œ ì°¨ - í‹° ë°•ìŠ¤ êµ¬ë… ì„œë¹„ìŠ¤ API
    
    ë‚˜ì˜ ì»¨ë””ì…˜, ì›í•˜ëŠ” ê¸°ë¶„, ì„ í˜¸í•˜ëŠ” í–¥ì— ë§ì¶° íë ˆì´ì…˜ëœ 7ì¼ í‹° ë°•ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
    
    ## ì£¼ìš” ê¸°ëŠ¥
    - ğŸ«– ë°•ìŠ¤ ìƒí’ˆ ì¡°íšŒ ë° ì¡°í•© ì„ íƒ
    - ğŸ›’ ì¥ë°”êµ¬ë‹ˆ ê´€ë¦¬
    - ğŸ“¦ ì£¼ë¬¸ ë° ê²°ì œ (í¬ì¸íŠ¸)
    - ğŸŸï¸ ì„ ì°©ìˆœ ì¿ í° ë°œê¸‰
    - ğŸ’° í¬ì¸íŠ¸ ì¶©ì „ ë° ê´€ë¦¬
    
    ## ì¸ì¦
    JWT Bearer í† í°ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    
    ## Rate Limiting
    - ì „ì²´ API: 100 ìš”ì²­/ë¶„/ì‚¬ìš©ì
    - ì¿ í° ë°œê¸‰: 5 ìš”ì²­/ë¶„/ì‚¬ìš©ì
    - ì£¼ë¬¸ ìƒì„±: 10 ìš”ì²­/ë¶„/ì‚¬ìš©ì
    
    ## ì—ëŸ¬ ì²˜ë¦¬
    ëª¨ë“  ì—ëŸ¬ëŠ” í‘œì¤€í™”ëœ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.

  version: 1.0.0
  contact:
    name: API Support
    email: support@oneulhancha.com
  license:
    name: Proprietary

servers:
  - url: https://api.oneulhancha.com/api/v1
    description: ìš´ì˜ ì„œë²„
  - url: https://dev-api.oneulhancha.com/api/v1
    description: ê°œë°œ ì„œë²„
  - url: http://localhost:8080/api/v1
    description: ë¡œì»¬ ì„œë²„

tags:
  - name: Products
    description: ìƒí’ˆ ê´€ë ¨ API
  - name: Cart
    description: ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨ API
  - name: Orders
    description: ì£¼ë¬¸ ê´€ë ¨ API
  - name: Coupons
    description: ì¿ í° ê´€ë ¨ API
  - name: Balance
    description: í¬ì¸íŠ¸ ê´€ë ¨ API

security:
  - BearerAuth: []

paths:
  /products:
    get:
      tags:
        - Products
      summary: ë°•ìŠ¤ ìƒí’ˆ ëª©ë¡ ì¡°íšŒ
      description: íŒë§¤ ì¤‘ì¸ ê¸°ë³¸/í”„ë¦¬ë¯¸ì—„ ë°•ìŠ¤ ìƒí’ˆ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getProducts
      security: []
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductListResponse'
              example:
                success: true
                data:
                  - id: 1
                    name: "ê¸°ë³¸ 7ì¼ ë°•ìŠ¤"
                    description: "ë‚˜ë¥¼ ìœ„í•œ í‹° íë ˆì´ì…˜ 7ì¼"
                    price: 29000
                    type: "BASIC"
                    dailyProductionLimit: 30
                    isActive: true
                  - id: 2
                    name: "í”„ë¦¬ë¯¸ì—„ 7ì¼ ë°•ìŠ¤"
                    description: "í”„ë¦¬ë¯¸ì—„ ë¸”ë Œë”© í‹°ë¡œ êµ¬ì„±ëœ 7ì¼ íë ˆì´ì…˜"
                    price: 49000
                    type: "PREMIUM"
                    dailyProductionLimit: 20
                    isActive: true
                timestamp: "2025-10-31T10:30:00Z"

  /products/options:
    get:
      tags:
        - Products
      summary: ì„ íƒ ì˜µì…˜ ì¡°íšŒ
      description: ì»¨ë””ì…˜, ê¸°ë¶„, í–¥ ì„ íƒ ì˜µì…˜ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getProductOptions
      security: []
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductOptionsResponse'
              example:
                success: true
                data:
                  conditions:
                    - id: 1
                      name: "FATIGUE"
                      displayName: "í”¼ë¡œ"
                      description: "ëª¸ì´ ë¬´ê²ê³  ì‰½ê²Œ ì§€ì³ìš”"
                      sortOrder: 1
                    - id: 2
                      name: "STRESS"
                      displayName: "ìŠ¤íŠ¸ë ˆìŠ¤"
                      description: "ë§ˆìŒì´ ë‹µë‹µí•˜ê³  ê¸´ì¥ë¼ìš”"
                      sortOrder: 2
                    - id: 3
                      name: "DIGESTION"
                      displayName: "ì†Œí™”ë¶ˆí¸"
                      description: "ì†ì´ ë”ë¶€ë£©í•˜ê³  ì†Œí™”ê°€ ì•ˆë¼ìš”"
                      sortOrder: 3
                  moods:
                    - id: 1
                      name: "ENERGETIC"
                      displayName: "í™œë ¥"
                      description: "ì—ë„ˆì§€ì™€ í™œê¸°ê°€ í•„ìš”í•´ìš”"
                      sortOrder: 1
                    - id: 2
                      name: "CALM"
                      displayName: "í‰ì˜¨"
                      description: "í¸ì•ˆí•˜ê³  ì°¨ë¶„í•œ ê¸°ë¶„ì´ ì¢‹ì•„ìš”"
                      sortOrder: 2
                    - id: 3
                      name: "FOCUS"
                      displayName: "ì§‘ì¤‘"
                      description: "ì§‘ì¤‘ë ¥ê³¼ ëª…ë£Œí•¨ì´ í•„ìš”í•´ìš”"
                      sortOrder: 3
                  scents:
                    - id: 1
                      name: "FLORAL"
                      displayName: "í”Œë¡œëŸ´"
                      description: "ê½ƒí–¥ê¸°ê°€ ë‚˜ëŠ” ë¶€ë“œëŸ¬ìš´ í–¥"
                      sortOrder: 1
                    - id: 2
                      name: "CITRUS"
                      displayName: "ì‹œíŠ¸ëŸ¬ìŠ¤"
                      description: "ìƒí¼í•˜ê³  ì²­ëŸ‰í•œ ê³¼ì¼ í–¥"
                      sortOrder: 2
                    - id: 3
                      name: "HERBAL"
                      displayName: "í—ˆë¸Œ"
                      description: "í—ˆë¸Œì˜ ê¹Šê³  ì§„í•œ í–¥"
                      sortOrder: 3
                timestamp: "2025-10-31T10:30:00Z"

  /products/combinations/{combinationId}/inventory:
    get:
      tags:
        - Products
      summary: ì¡°í•©ë³„ ì¬ê³  ì¡°íšŒ
      description: íŠ¹ì • ì¡°í•©ì˜ ì‹¤ì‹œê°„ ì¬ê³  ìˆ˜ëŸ‰ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getCombinationInventory
      security: []
      parameters:
        - name: combinationId
          in: path
          required: true
          description: ì¡°í•© ID
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InventoryResponse'
              example:
                success: true
                data:
                  combinationId: 1
                  combination:
                    productId: 1
                    productName: "ê¸°ë³¸ 7ì¼ ë°•ìŠ¤"
                    condition: "í”¼ë¡œ"
                    mood: "í™œë ¥"
                    scent: "ì‹œíŠ¸ëŸ¬ìŠ¤"
                  stock: 15
                  isAvailable: true
                  lastUpdated: "2025-10-31T10:30:00Z"
                timestamp: "2025-10-31T10:30:00Z"
        '404':
          $ref: '#/components/responses/NotFound'

  /products/popular-combinations:
    get:
      tags:
        - Products
      summary: ì¸ê¸° ì¡°í•© í†µê³„ ì¡°íšŒ
      description: ìµœê·¼ Nì¼ê°„ ê°€ì¥ ì¸ê¸°ìˆëŠ” ì¡°í•© TOP 5ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getPopularCombinations
      security: []
      parameters:
        - name: days
          in: query
          description: í†µê³„ ê¸°ê°„ (ì¼)
          required: false
          schema:
            type: integer
            default: 3
            minimum: 1
            maximum: 30
          example: 3
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PopularCombinationsResponse'

  /products/combinations/{combinationId}/preview:
    get:
      tags:
        - Products
      summary: ë°•ìŠ¤ ì¡°í•© ë¯¸ë¦¬ë³´ê¸°
      description: ì„ íƒí•œ ì¡°í•©ì˜ 7ì¼ í‹° êµ¬ì„±ì„ ë¯¸ë¦¬ í™•ì¸í•©ë‹ˆë‹¤.
      operationId: getCombinationPreview
      security: []
      parameters:
        - name: combinationId
          in: path
          required: true
          description: ì¡°í•© ID
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CombinationPreviewResponse'
        '404':
          $ref: '#/components/responses/NotFound'

  /cart:
    get:
      tags:
        - Cart
      summary: ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ
      description: ì‚¬ìš©ìì˜ ì¥ë°”êµ¬ë‹ˆ í•­ëª© ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getCart
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

    post:
      tags:
        - Cart
      summary: ì¥ë°”êµ¬ë‹ˆì— ë°•ìŠ¤ ì¶”ê°€
      description: ì„ íƒí•œ ë°•ìŠ¤ë¥¼ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€í•©ë‹ˆë‹¤. (ìµœëŒ€ 10ê°œ)
      operationId: addToCart
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddToCartRequest'
            example:
              productId: 1
              combinationId: 1
              quantity: 1
      responses:
        '201':
          description: ì¶”ê°€ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddToCartResponse'
              example:
                success: true
                data:
                  cartItemId: 1
                  message: "ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"
                timestamp: "2025-10-31T10:30:00Z"
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: ì¶©ëŒ (ì¥ë°”êµ¬ë‹ˆ ìµœëŒ€ ê°œìˆ˜ ì´ˆê³¼)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error:
                  code: "CART003"
                  message: "ì¥ë°”êµ¬ë‹ˆì— ìµœëŒ€ 10ê°œê¹Œì§€ ë‹´ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤"
                timestamp: "2025-10-31T10:30:00Z"

    delete:
      tags:
        - Cart
      summary: ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
      description: ì¥ë°”êµ¬ë‹ˆì˜ ëª¨ë“  í•­ëª©ì„ ì‚­ì œí•©ë‹ˆë‹¤.
      operationId: clearCart
      responses:
        '200':
          description: ì‚­ì œ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
              example:
                success: true
                data:
                  message: "ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì›Œì¡ŒìŠµë‹ˆë‹¤"
                timestamp: "2025-10-31T10:30:00Z"
        '401':
          $ref: '#/components/responses/Unauthorized'

  /cart/items/{cartItemId}:
    delete:
      tags:
        - Cart
      summary: ì¥ë°”êµ¬ë‹ˆ í•­ëª© ì‚­ì œ
      description: ì¥ë°”êµ¬ë‹ˆì—ì„œ íŠ¹ì • í•­ëª©ì„ ì‚­ì œí•©ë‹ˆë‹¤.
      operationId: removeCartItem
      parameters:
        - name: cartItemId
          in: path
          required: true
          description: ì¥ë°”êµ¬ë‹ˆ í•­ëª© ID
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: ì‚­ì œ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
              example:
                success: true
                data:
                  message: "ì¥ë°”êµ¬ë‹ˆ í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"
                timestamp: "2025-10-31T10:30:00Z"
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /orders:
    get:
      tags:
        - Orders
      summary: ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
      description: ì‚¬ìš©ìì˜ ì£¼ë¬¸ ë‚´ì—­ì„ í˜ì´ì§•í•˜ì—¬ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getOrders
      parameters:
        - name: page
          in: query
          description: í˜ì´ì§€ ë²ˆí˜¸ (0ë¶€í„° ì‹œì‘)
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
          example: 0
        - name: size
          in: query
          description: í˜ì´ì§€ í¬ê¸°
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
          example: 10
        - name: status
          in: query
          description: ì£¼ë¬¸ ìƒíƒœ í•„í„°
          required: false
          schema:
            type: string
            enum: [ALL, PENDING, PAID, PREPARING, SHIPPED, DELIVERED, CANCELLED]
            default: ALL
          example: ALL
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

    post:
      tags:
        - Orders
      summary: ì£¼ë¬¸ ìƒì„±
      description: ì¥ë°”êµ¬ë‹ˆì˜ ìƒí’ˆì„ ì£¼ë¬¸í•˜ê³  ê²°ì œí•©ë‹ˆë‹¤.
      operationId: createOrder
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequest'
            example:
              couponId: 1
              deliveryAddress:
                recipient: "ê¹€ë¯¼ì§€"
                phone: "010-1234-5678"
                zipCode: "06234"
                address: "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123"
                addressDetail: "456í˜¸"
      responses:
        '201':
          description: ì£¼ë¬¸ ìƒì„± ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrderResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          description: ì¶©ëŒ (ì¬ê³  ë¶€ì¡±, í¬ì¸íŠ¸ ë¶€ì¡±)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                inventoryShortage:
                  summary: ì¬ê³  ë¶€ì¡±
                  value:
                    success: false
                    error:
                      code: "INVENTORY002"
                      message: "ì¬ê³ ê°€ ë¶€ì¡±í•˜ì—¬ ì£¼ë¬¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
                    timestamp: "2025-10-31T10:30:00Z"
                insufficientBalance:
                  summary: í¬ì¸íŠ¸ ë¶€ì¡±
                  value:
                    success: false
                    error:
                      code: "PAYMENT001"
                      message: "ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤"
                      details:
                        currentBalance: 10000
                        requiredAmount: 29000
                    timestamp: "2025-10-31T10:30:00Z"

  /orders/{orderId}:
    get:
      tags:
        - Orders
      summary: ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ
      description: íŠ¹ì • ì£¼ë¬¸ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getOrder
      parameters:
        - name: orderId
          in: path
          required: true
          description: ì£¼ë¬¸ ID
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /orders/{orderId}/cancel:
    post:
      tags:
        - Orders
      summary: ì£¼ë¬¸ ì·¨ì†Œ
      description: ì£¼ë¬¸ì„ ì·¨ì†Œí•˜ê³  ì¬ê³ /í¬ì¸íŠ¸/ì¿ í°ì„ ë³µì›í•©ë‹ˆë‹¤. (ì œì¡° ì‹œì‘ ì „ì—ë§Œ ê°€ëŠ¥)
      operationId: cancelOrder
      parameters:
        - name: orderId
          in: path
          required: true
          description: ì£¼ë¬¸ ID
          schema:
            type: integer
            format: int64
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancelOrderRequest'
            example:
              reason: "ì£¼ë¬¸ ì‹¤ìˆ˜"
      responses:
        '200':
          description: ì·¨ì†Œ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancelOrderResponse'
        '400':
          description: ì·¨ì†Œ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error:
                  code: "ORDER003"
                  message: "ì´ë¯¸ ì œì¡°ê°€ ì‹œì‘ë˜ì–´ ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
                timestamp: "2025-10-31T10:30:00Z"
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /coupons:
    get:
      tags:
        - Coupons
      summary: ë°œê¸‰ ê°€ëŠ¥ ì¿ í° ëª©ë¡ ì¡°íšŒ
      description: í˜„ì¬ ë°œê¸‰ ê°€ëŠ¥í•œ ì¿ í° ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getAvailableCoupons
      security: []
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CouponListResponse'

  /coupons/{couponId}/issue:
    post:
      tags:
        - Coupons
      summary: ì„ ì°©ìˆœ ì¿ í° ë°œê¸‰
      description: ì„ ì°©ìˆœ ì¿ í°ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤. (1ì¸ 1ë§¤ ì œí•œ)
      operationId: issueCoupon
      parameters:
        - name: couponId
          in: path
          required: true
          description: ì¿ í° ID
          schema:
            type: integer
            format: int64
          example: 1
      responses:
        '201':
          description: ë°œê¸‰ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IssueCouponResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          description: ì´ë¯¸ ë°œê¸‰ë°›ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error:
                  code: "COUPON002"
                  message: "ì´ë¯¸ ë°œê¸‰ë°›ì€ ì¿ í°ì…ë‹ˆë‹¤"
                timestamp: "2025-10-31T10:30:00Z"
        '410':
          description: ì¿ í° ì†Œì§„
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error:
                  code: "COUPON001"
                  message: "ì¿ í°ì´ ëª¨ë‘ ì†Œì§„ë˜ì—ˆìŠµë‹ˆë‹¤"
                timestamp: "2025-10-31T10:30:00Z"
        '429':
          $ref: '#/components/responses/TooManyRequests'

  /coupons/my:
    get:
      tags:
        - Coupons
      summary: ë³´ìœ  ì¿ í° ì¡°íšŒ
      description: ì‚¬ìš©ìê°€ ë³´ìœ í•œ ì¿ í° ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getMyCoupons
      parameters:
        - name: status
          in: query
          description: ì¿ í° ìƒíƒœ í•„í„°
          required: false
          schema:
            type: string
            enum: [ALL, AVAILABLE, USED, EXPIRED]
            default: ALL
          example: AVAILABLE
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserCouponListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /users/balance/charge:
    post:
      tags:
        - Balance
      summary: í¬ì¸íŠ¸ ì¶©ì „
      description: ì‚¬ìš©ìì˜ í¬ì¸íŠ¸ë¥¼ ì¶©ì „í•©ë‹ˆë‹¤.
      operationId: chargeBalance
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChargeBalanceRequest'
            example:
              amount: 50000
      responses:
        '200':
          description: ì¶©ì „ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChargeBalanceResponse'
        '400':
          description: ì˜ëª»ëœ ê¸ˆì•¡
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                negativeAmount:
                  summary: ìŒìˆ˜ ê¸ˆì•¡
                  value:
                    success: false
                    error:
                      code: "PAYMENT004"
                      message: "ìœ íš¨í•˜ì§€ ì•Šì€ ê²°ì œ ê¸ˆì•¡ì…ë‹ˆë‹¤"
                    timestamp: "2025-10-31T10:30:00Z"
                notMultipleOf100:
                  summary: 100ì› ë‹¨ìœ„ ì•„ë‹˜
                  value:
                    success: false
                    error:
                      code: "PAYMENT004"
                      message: "100ì› ë‹¨ìœ„ë¡œ ì¶©ì „í•´ì£¼ì„¸ìš”"
                    timestamp: "2025-10-31T10:30:00Z"
        '401':
          $ref: '#/components/responses/Unauthorized'

  /users/balance/history:
    get:
      tags:
        - Balance
      summary: í¬ì¸íŠ¸ ë‚´ì—­ ì¡°íšŒ
      description: ì‚¬ìš©ìì˜ í¬ì¸íŠ¸ ì¶©ì „/ì‚¬ìš©/í™˜ë¶ˆ ë‚´ì—­ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: getBalanceHistory
      parameters:
        - name: page
          in: query
          description: í˜ì´ì§€ ë²ˆí˜¸ (0ë¶€í„° ì‹œì‘)
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
          example: 0
        - name: size
          in: query
          description: í˜ì´ì§€ í¬ê¸°
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
          example: 20
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BalanceHistoryResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        JWT í† í°ì„ ì‚¬ìš©í•œ ì¸ì¦
        
        ì˜ˆì‹œ: `Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`

  schemas:
    # ==================== Common ====================
    SuccessResponse:
      type: object
      required:
        - success
        - data
        - timestamp
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
        timestamp:
          type: string
          format: date-time
          example: "2025-10-31T10:30:00Z"

    ErrorResponse:
      type: object
      required:
        - success
        - error
        - timestamp
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              description: ì—ëŸ¬ ì½”ë“œ
              example: "PRODUCT001"
            message:
              type: string
              description: ì—ëŸ¬ ë©”ì‹œì§€
              example: "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìƒí’ˆì…ë‹ˆë‹¤"
            details:
              type: object
              description: ì¶”ê°€ ì—ëŸ¬ ì •ë³´
        timestamp:
          type: string
          format: date-time
          example: "2025-10-31T10:30:00Z"

    Pagination:
      type: object
      required:
        - page
        - size
        - totalElements
        - totalPages
      properties:
        page:
          type: integer
          description: í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ (0ë¶€í„° ì‹œì‘)
          example: 0
        size:
          type: integer
          description: í˜ì´ì§€ í¬ê¸°
          example: 10
        totalElements:
          type: integer
          description: ì „ì²´ í•­ëª© ìˆ˜
          example: 100
        totalPages:
          type: integer
          description: ì „ì²´ í˜ì´ì§€ ìˆ˜
          example: 10

    # ==================== Product ====================
    Product:
      type: object
      required:
        - id
        - name
        - description
        - price
        - type
        - dailyProductionLimit
        - isActive
      properties:
        id:
          type: integer
          format: int64
          description: ìƒí’ˆ ID
          example: 1
        name:
          type: string
          description: ìƒí’ˆëª…
          example: "ê¸°ë³¸ 7ì¼ ë°•ìŠ¤"
        description:
          type: string
          description: ìƒí’ˆ ì„¤ëª…
          example: "ë‚˜ë¥¼ ìœ„í•œ í‹° íë ˆì´ì…˜ 7ì¼"
        price:
          type: integer
          description: ê°€ê²© (ì›)
          example: 29000
        type:
          type: string
          enum: [BASIC, PREMIUM]
          description: ìƒí’ˆ íƒ€ì…
          example: "BASIC"
        dailyProductionLimit:
          type: integer
          description: ì¼ì¼ ìƒì‚° í•œë„
          example: 30
        isActive:
          type: boolean
          description: í™œì„±í™” ì—¬ë¶€
          example: true

    ProductListResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Product'

    SelectionOption:
      type: object
      required:
        - id
        - name
        - displayName
        - description
        - sortOrder
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: "FATIGUE"
        displayName:
          type: string
          example: "í”¼ë¡œ"
        description:
          type: string
          example: "ëª¸ì´ ë¬´ê²ê³  ì‰½ê²Œ ì§€ì³ìš”"
        sortOrder:
          type: integer
          example: 1

    ProductOptionsResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - conditions
                - moods
                - scents
              properties:
                conditions:
                  type: array
                  items:
                    $ref: '#/components/schemas/SelectionOption'
                moods:
                  type: array
                  items:
                    $ref: '#/components/schemas/SelectionOption'
                scents:
                  type: array
                  items:
                    $ref: '#/components/schemas/SelectionOption'

    CombinationInfo:
      type: object
      required:
        - productId
        - productName
        - condition
        - mood
        - scent
      properties:
        productId:
          type: integer
          format: int64
          example: 1
        productName:
          type: string
          example: "ê¸°ë³¸ 7ì¼ ë°•ìŠ¤"
        condition:
          type: string
          example: "í”¼ë¡œ"
        mood:
          type: string
          example: "í™œë ¥"
        scent:
          type: string
          example: "ì‹œíŠ¸ëŸ¬ìŠ¤"

    InventoryResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - combinationId
                - combination
                - stock
                - isAvailable
                - lastUpdated
              properties:
                combinationId:
                  type: integer
                  format: int64
                  example: 1
                combination:
                  $ref: '#/components/schemas/CombinationInfo'
                stock:
                  type: integer
                  description: í˜„ì¬ ì¬ê³  ìˆ˜ëŸ‰
                  example: 15
                isAvailable:
                  type: boolean
                  description: êµ¬ë§¤ ê°€ëŠ¥ ì—¬ë¶€
                  example: true
                lastUpdated:
                  type: string
                  format: date-time
                  example: "2025-10-31T10:30:00Z"

    PopularCombinationItem:
      type: object
      required:
        - rank
        - combination
        - orderCount
        - percentageChange
        - tagline
      properties:
        rank:
          type: integer
          example: 1
        combination:
          allOf:
            - $ref: '#/components/schemas/CombinationInfo'
            - type: object
              properties:
                id:
                  type: integer
                  format: int64
                  example: 1
        orderCount:
          type: integer
          example: 143
        percentageChange:
          type: string
          example: "+15%"
        tagline:
          type: string
          example: "ì—ë„ˆì§€ê°€ í•„ìš”í•œ ì§ì¥ì¸ë“¤ì˜ ì„ íƒ"

    PopularCombinationsResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - period
                - combinations
              properties:
                period:
                  type: object
                  properties:
                    days:
                      type: integer
                      example: 3
                    from:
                      type: string
                      format: date-time
                      example: "2025-10-28T00:00:00Z"
                    to:
                      type: string
                      format: date-time
                      example: "2025-10-31T23:59:59Z"
                combinations:
                  type: array
                  items:
                    $ref: '#/components/schemas/PopularCombinationItem'

    TeaInfo:
      type: object
      required:
        - dayNumber
        - dayOfWeek
        - teaName
        - mainIngredients
        - expectedEffects
        - brewingGuide
      properties:
        dayNumber:
          type: integer
          minimum: 1
          maximum: 7
          example: 1
        dayOfWeek:
          type: string
          example: "ì›”ìš”ì¼"
        teaName:
          type: string
          example: "ë ˆëª¬ê·¸ë¼ìŠ¤ ì§„ì € í‹°"
        mainIngredients:
          type: string
          example: "ë ˆëª¬ê·¸ë¼ìŠ¤, ìƒê°•, ë ˆëª¬ë°¤"
        expectedEffects:
          type: string
          example: "í™œë ¥ ì¦ì§„, ê¸°ë¶„ ì „í™˜"
        brewingGuide:
          type: string
          example: "80ë„ ë¬¼ 200mlì— 3ë¶„"

    CombinationPreviewResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - combinationId
                - combination
                - weeklyTeas
              properties:
                combinationId:
                  type: integer
                  format: int64
                  example: 1
                combination:
                  $ref: '#/components/schemas/CombinationInfo'
                weeklyTeas:
                  type: array
                  items:
                    $ref: '#/components/schemas/TeaInfo'
                  minItems: 7
                  maxItems: 7

    # ==================== Cart ====================
    AddToCartRequest:
      type: object
      required:
        - productId
        - combinationId
        - quantity
      properties:
        productId:
          type: integer
          format: int64
          description: ìƒí’ˆ ID
          example: 1
        combinationId:
          type: integer
          format: int64
          description: ì¡°í•© ID
          example: 1
        quantity:
          type: integer
          description: ìˆ˜ëŸ‰ (í˜„ì¬ëŠ” 1ë§Œ ê°€ëŠ¥)
          minimum: 1
          maximum: 1
          example: 1

    AddToCartResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - cartItemId
                - message
              properties:
                cartItemId:
                  type: integer
                  format: int64
                  example: 1
                message:
                  type: string
                  example: "ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"

    CartItem:
      type: object
      required:
        - cartItemId
        - product
        - combination
        - quantity
        - subtotal
        - isAvailable
        - stockRemaining
      properties:
        cartItemId:
          type: integer
          format: int64
          example: 1
        product:
          type: object
          properties:
            id:
              type: integer
              format: int64
              example: 1
            name:
              type: string
              example: "ê¸°ë³¸ 7ì¼ ë°•ìŠ¤"
            price:
              type: integer
              example: 29000
        combination:
          type: object
          properties:
            id:
              type: integer
              format: int64
              example: 1
            condition:
              type: string
              example: "í”¼ë¡œ"
            mood:
              type: string
              example: "í™œë ¥"
            scent:
              type: string
              example: "ì‹œíŠ¸ëŸ¬ìŠ¤"
        quantity:
          type: integer
          example: 1
        subtotal:
          type: integer
          description: ì†Œê³„ ê¸ˆì•¡
          example: 29000
        isAvailable:
          type: boolean
          description: í˜„ì¬ êµ¬ë§¤ ê°€ëŠ¥ ì—¬ë¶€
          example: true
        stockRemaining:
          type: integer
          description: ë‚¨ì€ ì¬ê³ 
          example: 15

    CartResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - items
                - summary
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/CartItem'
                summary:
                  type: object
                  properties:
                    totalItems:
                      type: integer
                      example: 2
                    totalAmount:
                      type: integer
                      example: 58000

    # ==================== Order ====================
    DeliveryAddress:
      type: object
      required:
        - recipient
        - phone
        - zipCode
        - address
        - addressDetail
      properties:
        recipient:
          type: string
          description: ìˆ˜ë ¹ì¸
          example: "ê¹€ë¯¼ì§€"
        phone:
          type: string
          description: ì „í™”ë²ˆí˜¸
          pattern: '^\d{3}-\d{4}-\d{4}$'
          example: "010-1234-5678"
        zipCode:
          type: string
          description: ìš°í¸ë²ˆí˜¸
          example: "06234"
        address:
          type: string
          description: ì£¼ì†Œ
          example: "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123"
        addressDetail:
          type: string
          description: ìƒì„¸ ì£¼ì†Œ
          example: "456í˜¸"

    CreateOrderRequest:
      type: object
      required:
        - deliveryAddress
      properties:
        couponId:
          type: integer
          format: int64
          description: ì‚¬ìš©í•  ì¿ í° ID (ì„ íƒì‚¬í•­)
          nullable: true
          example: 1
        deliveryAddress:
          $ref: '#/components/schemas/DeliveryAddress'

    OrderItemInfo:
      type: object
      required:
        - product
        - combination
        - quantity
        - price
      properties:
        product:
          type: string
          example: "ê¸°ë³¸ 7ì¼ ë°•ìŠ¤"
        combination:
          type: string
          example: "í”¼ë¡œ + í™œë ¥ + ì‹œíŠ¸ëŸ¬ìŠ¤"
        quantity:
          type: integer
          example: 1
        price:
          type: integer
          example: 29000

    PaymentInfo:
      type: object
      required:
        - totalAmount
        - discountAmount
        - finalAmount
        - method
      properties:
        totalAmount:
          type: integer
          description: ì´ ìƒí’ˆ ê¸ˆì•¡
          example: 29000
        discountAmount:
          type: integer
          description: í• ì¸ ê¸ˆì•¡
          example: 14500
        finalAmount:
          type: integer
          description: ìµœì¢… ê²°ì œ ê¸ˆì•¡
          example: 14500
        method:
          type: string
          enum: [BALANCE]
          example: "BALANCE"

    DeliveryInfo:
      type: object
      required:
        - recipient
        - phone
        - address
        - estimatedDeliveryDate
      properties:
        recipient:
          type: string
          example: "ê¹€ë¯¼ì§€"
        phone:
          type: string
          example: "010-1234-5678"
        address:
          type: string
          example: "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123 456í˜¸"
        estimatedDeliveryDate:
          type: string
          format: date
          example: "2025-11-03"
        trackingNumber:
          type: string
          nullable: true
          example: null

    CreateOrderResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - orderId
                - orderNumber
                - items
                - payment
                - delivery
                - status
                - orderedAt
              properties:
                orderId:
                  type: integer
                  format: int64
                  example: 1
                orderNumber:
                  type: string
                  example: "ORD-20251031-001"
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/OrderItemInfo'
                payment:
                  $ref: '#/components/schemas/PaymentInfo'
                delivery:
                  $ref: '#/components/schemas/DeliveryInfo'
                status:
                  type: string
                  enum: [PENDING, PAID, PREPARING, SHIPPED, DELIVERED, CANCELLED]
                  example: "PAID"
                orderedAt:
                  type: string
                  format: date-time
                  example: "2025-10-31T14:30:00Z"

    OrderSummary:
      type: object
      required:
        - orderId
        - orderNumber
        - totalItems
        - finalAmount
        - status
        - orderedAt
      properties:
        orderId:
          type: integer
          format: int64
          example: 1
        orderNumber:
          type: string
          example: "ORD-20251031-001"
        totalItems:
          type: integer
          example: 2
        finalAmount:
          type: integer
          example: 29000
        status:
          type: string
          enum: [PENDING, PAID, PREPARING, SHIPPED, DELIVERED, CANCELLED]
          example: "PAID"
        orderedAt:
          type: string
          format: date-time
          example: "2025-10-31T14:30:00Z"

    OrderListResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - content
                - pagination
              properties:
                content:
                  type: array
                  items:
                    $ref: '#/components/schemas/OrderSummary'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    OrderItemDetail:
      type: object
      required:
        - product
        - combination
        - quantity
        - weeklyTeas
      properties:
        product:
          type: object
          properties:
            name:
              type: string
              example: "ê¸°ë³¸ 7ì¼ ë°•ìŠ¤"
            price:
              type: integer
              example: 29000
        combination:
          type: object
          properties:
            condition:
              type: string
              example: "í”¼ë¡œ"
            mood:
              type: string
              example: "í™œë ¥"
            scent:
              type: string
              example: "ì‹œíŠ¸ëŸ¬ìŠ¤"
        quantity:
          type: integer
          example: 1
        weeklyTeas:
          type: array
          items:
            $ref: '#/components/schemas/TeaInfo'
          minItems: 7
          maxItems: 7

    OrderDetailResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - orderId
                - orderNumber
                - status
                - items
                - payment
                - delivery
                - orderedAt
              properties:
                orderId:
                  type: integer
                  format: int64
                  example: 1
                orderNumber:
                  type: string
                  example: "ORD-20251031-001"
                status:
                  type: string
                  enum: [PENDING, PAID, PREPARING, SHIPPED, DELIVERED, CANCELLED]
                  example: "PAID"
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/OrderItemDetail'
                payment:
                  allOf:
                    - $ref: '#/components/schemas/PaymentInfo'
                    - type: object
                      properties:
                        paidAt:
                          type: string
                          format: date-time
                          example: "2025-10-31T14:30:15Z"
                delivery:
                  $ref: '#/components/schemas/DeliveryInfo'
                orderedAt:
                  type: string
                  format: date-time
                  example: "2025-10-31T14:30:00Z"

    CancelOrderRequest:
      type: object
      required:
        - reason
      properties:
        reason:
          type: string
          description: ì·¨ì†Œ ì‚¬ìœ 
          minLength: 1
          maxLength: 500
          example: "ì£¼ë¬¸ ì‹¤ìˆ˜"

    CancelOrderResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - orderId
                - status
                - refund
                - message
              properties:
                orderId:
                  type: integer
                  format: int64
                  example: 1
                status:
                  type: string
                  enum: [CANCELLED]
                  example: "CANCELLED"
                refund:
                  type: object
                  properties:
                    amount:
                      type: integer
                      example: 14500
                    method:
                      type: string
                      example: "BALANCE"
                    refundedAt:
                      type: string
                      format: date-time
                      example: "2025-10-31T15:00:00Z"
                message:
                  type: string
                  example: "ì£¼ë¬¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤"

    # ==================== Coupon ====================
    CouponInfo:
      type: object
      required:
        - id
        - name
        - code
        - discountType
        - discountValue
        - minOrderAmount
        - maxIssueCount
        - issuedCount
        - remainingCount
        - issueStartAt
        - issueEndAt
        - validDays
        - isActive
        - isIssuable
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: "ì²«êµ¬ë§¤ 50% í• ì¸"
        code:
          type: string
          example: "FIRST50"
        discountType:
          type: string
          enum: [PERCENTAGE, FIXED]
          example: "PERCENTAGE"
        discountValue:
          type: integer
          description: PERCENTAGEì¼ ê²½ìš° í¼ì„¼íŠ¸, FIXEDì¼ ê²½ìš° ê¸ˆì•¡
          example: 50
        minOrderAmount:
          type: integer
          description: ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡
          example: 20000
        maxIssueCount:
          type: integer
          description: ìµœëŒ€ ë°œê¸‰ ìˆ˜ëŸ‰
          example: 100
        issuedCount:
          type: integer
          description: í˜„ì¬ ë°œê¸‰ ìˆ˜ëŸ‰
          example: 78
        remainingCount:
          type: integer
          description: ë‚¨ì€ ìˆ˜ëŸ‰
          example: 22
        issueStartAt:
          type: string
          format: date-time
          example: "2025-10-25T00:00:00Z"
        issueEndAt:
          type: string
          format: date-time
          example: "2025-11-30T23:59:59Z"
        validDays:
          type: integer
          description: ìœ íš¨ ê¸°ê°„ (ì¼)
          example: 7
        isActive:
          type: boolean
          example: true
        isIssuable:
          type: boolean
          description: í˜„ì¬ ë°œê¸‰ ê°€ëŠ¥ ì—¬ë¶€
          example: true

    CouponListResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/CouponInfo'

    IssueCouponResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - userCouponId
                - coupon
                - issuedAt
                - expiredAt
                - message
              properties:
                userCouponId:
                  type: integer
                  format: int64
                  example: 1
                coupon:
                  type: object
                  properties:
                    id:
                      type: integer
                      format: int64
                      example: 1
                    name:
                      type: string
                      example: "ì²«êµ¬ë§¤ 50% í• ì¸"
                    discountType:
                      type: string
                      enum: [PERCENTAGE, FIXED]
                      example: "PERCENTAGE"
                    discountValue:
                      type: integer
                      example: 50
                    minOrderAmount:
                      type: integer
                      example: 20000
                issuedAt:
                  type: string
                  format: date-time
                  example: "2025-10-31T14:00:00Z"
                expiredAt:
                  type: string
                  format: date-time
                  example: "2025-11-07T23:59:59Z"
                message:
                  type: string
                  example: "ì¿ í°ì´ ë°œê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤"

    UserCouponInfo:
      type: object
      required:
        - userCouponId
        - coupon
        - status
        - issuedAt
        - expiredAt
        - daysUntilExpiry
      properties:
        userCouponId:
          type: integer
          format: int64
          example: 1
        coupon:
          type: object
          properties:
            id:
              type: integer
              format: int64
              example: 1
            name:
              type: string
              example: "ì²«êµ¬ë§¤ 50% í• ì¸"
            discountType:
              type: string
              enum: [PERCENTAGE, FIXED]
              example: "PERCENTAGE"
            discountValue:
              type: integer
              example: 50
            minOrderAmount:
              type: integer
              example: 20000
        status:
          type: string
          enum: [AVAILABLE, USED, EXPIRED]
          example: "AVAILABLE"
        issuedAt:
          type: string
          format: date-time
          example: "2025-10-31T14:00:00Z"
        expiredAt:
          type: string
          format: date-time
          example: "2025-11-07T23:59:59Z"
        usedAt:
          type: string
          format: date-time
          nullable: true
          example: null
        daysUntilExpiry:
          type: integer
          description: ë§Œë£Œê¹Œì§€ ë‚¨ì€ ì¼ìˆ˜
          example: 7

    UserCouponListResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/UserCouponInfo'

    # ==================== Balance ====================
    ChargeBalanceRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: integer
          description: ì¶©ì „ ê¸ˆì•¡ (ì›, 100ì› ë‹¨ìœ„)
          minimum: 100
          multipleOf: 100
          example: 50000

    ChargeBalanceResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - transactionId
                - amount
                - balanceAfter
                - chargedAt
              properties:
                transactionId:
                  type: integer
                  format: int64
                  example: 1
                amount:
                  type: integer
                  example: 50000
                balanceAfter:
                  type: integer
                  description: ì¶©ì „ í›„ ì”ì•¡
                  example: 50000
                chargedAt:
                  type: string
                  format: date-time
                  example: "2025-10-31T10:00:00Z"

    BalanceTransaction:
      type: object
      required:
        - transactionId
        - transactionType
        - amount
        - balanceAfter
        - description
        - createdAt
      properties:
        transactionId:
          type: integer
          format: int64
          example: 3
        transactionType:
          type: string
          enum: [CHARGE, USE, REFUND]
          example: "USE"
        amount:
          type: integer
          description: ê±°ë˜ ê¸ˆì•¡ (ì¶©ì „/í™˜ë¶ˆì€ ì–‘ìˆ˜, ì‚¬ìš©ì€ ìŒìˆ˜)
          example: -29000
        balanceAfter:
          type: integer
          description: ê±°ë˜ í›„ ì”ì•¡
          example: 21000
        description:
          type: string
          example: "ì£¼ë¬¸ ê²°ì œ (ORD-20251031-001)"
        createdAt:
          type: string
          format: date-time
          example: "2025-10-31T14:30:00Z"

    BalanceHistoryResponse:
      allOf:
        - $ref: '#/components/schemas/SuccessResponse'
        - type: object
          properties:
            data:
              type: object
              required:
                - currentBalance
                - history
                - pagination
              properties:
                currentBalance:
                  type: integer
                  description: í˜„ì¬ ì”ì•¡
                  example: 50000
                history:
                  type: array
                  items:
                    $ref: '#/components/schemas/BalanceTransaction'
                pagination:
                  $ref: '#/components/schemas/Pagination'

  responses:
    BadRequest:
      description: ì˜ëª»ëœ ìš”ì²­
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error:
              code: "VALIDATION_ERROR"
              message: "ìœ íš¨í•˜ì§€ ì•Šì€ ìš”ì²­ì…ë‹ˆë‹¤"
            timestamp: "2025-10-31T10:30:00Z"

    Unauthorized:
      description: ì¸ì¦ ì‹¤íŒ¨
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error:
              code: "UNAUTHORIZED"
              message: "ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤"
            timestamp: "2025-10-31T10:30:00Z"

    Forbidden:
      description: ê¶Œí•œ ì—†ìŒ
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error:
              code: "FORBIDDEN"
              message: "ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"
            timestamp: "2025-10-31T10:30:00Z"

    NotFound:
      description: ë¦¬ì†ŒìŠ¤ ì—†ìŒ
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error:
              code: "NOT_FOUND"
              message: "ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
            timestamp: "2025-10-31T10:30:00Z"

    TooManyRequests:
      description: ìš”ì²­ ì œí•œ ì´ˆê³¼
      headers:
        X-RateLimit-Limit:
          schema:
            type: integer
          description: ì œí•œ ìˆ˜
          example: 5
        X-RateLimit-Remaining:
          schema:
            type: integer
          description: ë‚¨ì€ ìš”ì²­ ìˆ˜
          example: 0
        X-RateLimit-Reset:
          schema:
            type: integer
          description: ë¦¬ì…‹ ì‹œê° (Unix timestamp)
          example: 1698753600
        Retry-After:
          schema:
            type: integer
          description: ì¬ì‹œë„ ê°€ëŠ¥ ì‹œê°„ (ì´ˆ)
          example: 60
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error:
              code: "RATE_LIMIT_EXCEEDED"
              message: "ìš”ì²­ íšŸìˆ˜ ì œí•œì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤"
              details:
                retryAfter: 60
            timestamp: "2025-10-31T10:30:00Z"