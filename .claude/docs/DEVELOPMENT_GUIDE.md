# 개발 진행 가이드

## 📋 페이즈별 진행 순서

### Phase 1: 환경 설정 및 분석
1. **프로젝트 분석**
   ```bash
   /init  # Claude Code 프로젝트 맥락 생성
   ```
   - 기존 코드 구조 파악
   - TODO 주석 확인
   - 데이터베이스 테이블 클래스 이해

2. **테스트 환경 설정**
   ```bash
   /test-setup
   ```
   - 테스트 데이터 셋업 로직 구현
   - 기본 테스트 구조 생성

### Phase 2: STEP1 - TDD 기본 (4가지 핵심 기능)
각 기능별로 다음 순서 반복:

1. **기능별 TDD 사이클**
   ```bash
   /tdd-cycle
   ```
   - Red: 실패하는 테스트 작성
   - Green: 최소 구현으로 테스트 통과
   - Refactor: 코드 품질 개선

2. **포인트 기능 구현**
   ```bash
   /point-feature
   ```
   - 포인트 조회 → 충전 → 사용 → 내역 조회 순서로 진행

### Phase 3: STEP2 - TDD 심화 (정책 및 동시성)
1. **비즈니스 정책 구현**
   - 각 정책별 예외 케이스 테스트 작성
   - 정책 검증 로직 구현

2. **통합 테스트 작성**
   - API 레벨 통합 테스트
   - 시나리오 기반 테스트

3. **동시성 제어 구현**
   - 동시 요청 처리 로직
   - 동시성 테스트 작성

4. **문서화**
   - README.md에 동시성 제어 방식 분석 보고서 작성

## 🎯 커맨드 사용 순서

### 초기 설정
```bash
1. /init              # 프로젝트 맥락 파악
2. /test-setup        # 테스트 환경 및 데이터 셋업
```

### 기능 개발 (각 기능마다 반복)
```bash
3. /point-feature     # 구현할 기능 선택 및 요구사항 확인
4. /tdd-cycle        # TDD 사이클로 개발 진행
```

### 통합 및 고도화
```bash
5. /tdd-cycle        # 통합 테스트 및 동시성 테스트 작성
```

## ✅ 평가 기준 체크리스트

### STEP1 - TDD 기본 역량
- [ ] **포인트 조회** (`GET /point/{id}`) 구현 및 단위 테스트
- [ ] **포인트 충전** (`PATCH /point/{id}/charge`) 구현 및 단위 테스트
- [ ] **포인트 사용** (`PATCH /point/{id}/use`) 구현 및 단위 테스트
- [ ] **포인트 내역 조회** (`GET /point/{id}/histories`) 구현 및 단위 테스트
- [ ] 테스트 가능한 코드 구조 설계 (의존성 주입 등)
- [ ] Red-Green-Refactor 사이클 준수
- [ ] Claude Code 활용한 개발 프로세스 문서화

### STEP2 - TDD 심화 및 동시성 제어
- [ ] **잔고 부족 예외** 테스트 및 구현
- [ ] **최소 충전 금액 정책** 테스트 및 구현
- [ ] **사용 단위 제한 정책** 테스트 및 구현
- [ ] **일일 사용 한도 정책** 테스트 및 구현
- [ ] 각 기능별 **통합 테스트** 작성
- [ ] **동시성 제어** 구현 및 테스트
- [ ] **동시성 제어 분석 보고서** 작성 (README.md)

### 도전 항목
- [ ] 모킹(Mocking)과 스텁(Stub) 적절한 활용
- [ ] AI 프롬프트 엔지니어링을 통한 효율적 테스트 코드 생성
- [ ] Custom Commands 활용한 반복 작업 자동화
- [ ] 테스트 커버리지 80% 이상 달성
- [ ] TDD 방법론과 AI 활용 과정 문서화

## 🚨 주의사항

### 반드시 지켜야 할 제약사항
1. **기존 database 테이블 클래스 수정 금지**
   - `UserPointTable.kt`, `PointHistoryTable.kt` 변경 불가
   - 제공된 API만 사용

2. **실제 DB 사용 금지**
   - 주어진 인메모리 객체만 활용
   - 분산 환경 고려하지 않음

3. **TDD 사이클 엄격 준수**
   - 반드시 테스트 먼저 작성
   - 테스트 통과 후 리팩토링

### 개발 시 확인사항
- 각 단계 완료 후 `./gradlew test` 실행하여 모든 테스트 통과 확인
- 커밋 메시지는 정해진 형식 준수
- KDoc 주석 작성 필수